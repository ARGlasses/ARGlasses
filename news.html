<!DOCTYPE html>
<html lang="en" data-theme="light">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>News</title>

    <!-- Styles -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css" />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="style.css" />
    <link rel="icon" href="images/logo7.png" type="image/png" />

    <!-- Keep your News page-specific styles -->
    <style>
      /* ===== Base / layout ===== */
      html, body { height: 100%; margin: 0; }
      body {
        overflow-x: hidden;
        font-family: "Poppins", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
        background: #fff;
      }

      /* When this page loads the shared header, force light theme + grey text */
      body.news-page #navbar {
        background: white !important;
        box-shadow: none !important;
        border: 0;
        padding-block: .5rem;
      }
      body.news-page #navbar .nav-inner a { color: var(--nav-text-color, #555) !important; }
      body.news-page #navbar img { height: 28px; width: auto; }
      body.news-page #navbar .nav-inner { text-shadow: none; }

      /* ===== Viewport area ===== */
      .viewport {
        position: relative;
        height: 100svh;
        width: 100%;
        overflow: hidden;
      }

      .rail {
        display: flex;
        align-items: center;
        height: 100%;
        width: 100%;
        gap: 1.25rem;
        padding: 0 max(1rem, calc((100vw - min(85vw, 1100px)) / 2));
        overflow-x: auto;
        overflow-y: hidden;
        scroll-snap-type: x mandatory;
        scroll-behavior: smooth;
        -webkit-overflow-scrolling: touch;
      }
      .rail::-webkit-scrollbar { display: none; }
      .rail { scrollbar-width: none; -ms-overflow-style: none; }

      .story {
        position: relative;
        min-width: clamp(78%, 85vw, 1100px);
        height: clamp(420px, 82svh, 900px);
        border-radius: 24px;
        overflow: hidden;
        scroll-snap-align: center;
        isolation: isolate;
        color: white;
        box-shadow: 0 20px 60px rgba(0,0,0,.35), 0 2px 12px rgba(0,0,0,.25);
        background: #111;
      }
      .story img.bg {
        position: absolute;
        inset: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
        z-index: -2;
      }
      .story::after {
        content: "";
        position: absolute;
        inset: 0;
        background: linear-gradient(
          to top,
          rgba(0,0,0,0.55) 0%,
          rgba(0,0,0,0.25) 40%,
          rgba(0,0,0,0.10) 65%,
          rgba(0,0,0,0.30) 100%
        );
        z-index: -1;
      }
      .story-content {
        position: absolute;
        inset: 0;
        display: grid;
        align-content: end;
        padding: clamp(1rem, 4vw, 3rem);
        gap: .5rem;
        max-width: 100ch;
      }
      .story-kicker { font-size: .95rem; opacity: .9; }
      .story-title  { font-size: clamp(1.8rem, 5vw, 3rem); line-height: 1.1; margin: 0; font-weight: 600; }
      .story-teaser { font-size: clamp(1rem, 1.8vw, 1.15rem); margin: .25rem 0 0; max-width: 65ch; opacity: .95; }
      .story-actions { margin-top: .75rem; }

      .arrow {
        position: absolute;
        top: 50%;
        translate: 0 -50%;
        width: 3rem;
        height: 3rem;
        border-radius: 999px;
        border: 1px solid rgba(255,255,255,.35);
        background: rgba(0,0,0,.25);
        backdrop-filter: blur(4px);
        display: grid;
        place-items: center;
        cursor: pointer;
        z-index: 60;
        transition: transform .12s ease, opacity .2s ease;
        color: #fff;
      }
      .arrow.left  { left: .75rem; }
      .arrow.right { right: .75rem; }
      .arrow[disabled] { opacity: .35; cursor: not-allowed; }
      .arrow:hover     { transform: translateY(-50%) scale(1.05); }
      .arrow svg { width: 22px; height: 22px; }

      .dots {
        position: absolute;
        left: 0; right: 0; bottom: 1.1rem;
        display: flex;
        gap: .45rem;
        justify-content: center;
        z-index: 55;
        pointer-events: none;
      }
      .dots button {
        pointer-events: auto;
        width: 8px; height: 8px; border-radius: 999px; border: 0;
        background: rgba(255,255,255,.45);
      }
      .dots button[aria-current="true"] {
        width: 22px;
        background: white;
      }
      @media (min-width: 1200px) {
        .arrow { width: 3.25rem; height: 3.25rem; }
      }
    </style>

    <!-- Shared header behavior -->
    <script src="./header.js?v=6" defer></script>
  </head>
  <body class="news-page">
    <!-- Shared header mount -->
    <div id="site-header"></div>

    <!-- Stories -->
    <section class="viewport" aria-label="Latest AR Glasses news">
      <button class="arrow left" aria-label="Previous story" disabled>
        <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M15 18l-6-6 6-6" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
      </button>
      <button class="arrow right" aria-label="Next story">
        <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M9 6l6 6-6 6" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
      </button>

      <div class="rail" tabindex="0">
        <!-- Story 1 -->
        <article class="story" id="story-1"><img class="bg" src="images/metaglasses.webp" alt="" /><div class="story-content"><div class="story-kicker">Meta's</div><h1 class="story-title">Oakley Meta HSTN smart glasses</h1><p class="story-teaser">(July 2025)</p><div class="story-actions"><a href="#" role="button">Read more</a></div></div></article>
        <!-- Story 2 -->
        <article class="story" id="story-2"><img class="bg" src="images/timcook.webp" alt="" /><div class="story-content"><div class="story-kicker">Apple's</div><h1 class="story-title">Liquid Glass UI preview</h1><p class="story-teaser">(I/O 2025 & TED2025)</p><div class="story-actions"><a href="#" role="button">Read more</a></div></div></article>
        <!-- Story 3 -->
        <article class="story" id="story-3"><img class="bg" src="images/google.jpg" alt="" /><div class="story-content"><div class="story-kicker">Google's</div><h1 class="story-title">Android XR glasses demo</h1><p class="story-teaser">(late 2024)</p><div class="story-actions"><a href="#" role="button">Read more</a></div></div></article>
        <!-- Story 4 -->
        <article class="story" id="story-4"><img class="bg" src="images/snap.jpg" alt="" /><div class="story-content"><div class="story-kicker">Snap's</div><h1 class="story-title">5th-gen Spectacles</h1><p class="story-teaser">(CES 2025)</p><div class="story-actions"><a href="#" role="button">Read more</a></div></div></article>
        <!-- Story 5 -->
        <article class="story" id="story-5"><img class="bg" src="images/vuzix.webp" alt="" /><div class="story-content"><div class="story-kicker">Vuzix's</div><h1 class="story-title">Vuzix Ultralite Pro</h1><p class="story-teaser">(WWDC 2025)</p><div class="story-actions"><a href="#" role="button">Read more</a></div></div></article>
      </div>

      <div class="dots" aria-hidden="true"></div>
    </section>

    <!-- Footer -->
    <footer class="container professional-footer">
      <div class="footer-content">
        <div class="footer-brand">
          <div class="footer-logo-group">
            <img src="images/logo7.png" alt="AR Glasses Logo" />
            <h4>AR glasses</h4>
          </div>
          <p>Changing how you see the world</p>
        </div>
        <div class="footer-links">
          <strong>Site Terms and Policies</strong>
          <ul>
            <li><a href="contact.html">Contact</a></li>
            <li><a href="Privacy-Policy.html">Privacy Policy</a></li>
            <li><a href="Cookie-Policy.html">Cookie Policy</a></li>
            <li><a href="terms.html">Terms &amp; Conditions</a></li>
          </ul>
        </div>
      </div>
      <div class="footer-bottom">
        <small>&copy; 2025 ARglasses.com â€¢ All rights reserved</small>
      </div>
    </footer>

    <!-- Inject shared header -->
    <script>
      window.addEventListener("DOMContentLoaded", function () {
        const mount = document.getElementById("site-header");
        fetch("./header.html?v=6")
          .then(r => r.text())
          .then(html => {
            mount.innerHTML = html;
            if (typeof window.__initHeader === "function") {
              try { window.__initHeader(); } catch (_) {}
            }

            // Light navbar treatment for news page
            const navbar = document.getElementById("navbar");
            if (navbar) {
              navbar.classList.remove("dark-nav");
              navbar.classList.add("light-nav");
              navbar.style.setProperty("--nav-text-color", "#555");
            }

            // --- TEMPORARY LOAD SPACER (no permanent padding) ---
            // 1) Measure header height
            const nb = document.getElementById("navbar");
            const h = nb ? Math.round(nb.getBoundingClientRect().height) : 0;

            // 2) Insert a spacer BEFORE the viewport so the page lands fully visible
            const viewport = document.querySelector(".viewport");
            let spacer = null;
            if (viewport && h > 0) {
              spacer = document.createElement("div");
              spacer.id = "initial-offset";
              spacer.style.cssText = "height:" + h + "px; width:100%;";
              viewport.parentNode.insertBefore(spacer, viewport);
            }

            // 3) Remove the spacer on first user interaction (before scrolling),
            //    so no extra space is visible when scrolling back to the top.
            function removeSpacerEarly() {
              if (!spacer || !spacer.parentNode) return;
              spacer.parentNode.removeChild(spacer);
              spacer = null;
              detachEarlyListeners();
            }
            function detachEarlyListeners() {
              window.removeEventListener("pointerdown", removeSpacerEarly, true);
              window.removeEventListener("keydown", removeSpacerEarly, true);
              window.removeEventListener("touchstart", removeSpacerEarly, true);
            }
            window.addEventListener("pointerdown", removeSpacerEarly, true);
            window.addEventListener("keydown", removeSpacerEarly, true);
            window.addEventListener("touchstart", removeSpacerEarly, true);

            // 4) Failsafe: if user somehow doesn't interact, remove after short delay
            //    to avoid layout oddities on super slow loads.
            setTimeout(removeSpacerEarly, 1200);

            // --- Robust fallback: bind ALL dropdowns & drawer controls ---
            (function bindFallback(){
              const menu     = document.getElementById("primary-nav");
              const toggle   = document.getElementById("menu-toggle");
              const backdrop = document.getElementById("backdrop");
              const closeBtn = menu ? menu.querySelector(".drawer-close") : null;

              if (!menu || !toggle || !backdrop) return;

              function openDrawer(){
                menu.classList.add("open");
                backdrop.classList.add("show");
                toggle.setAttribute("aria-expanded","true");
                document.body.style.overflow = "hidden";
              }
              function closeDrawer(){
                menu.classList.remove("open");
                backdrop.classList.remove("show");
                toggle.setAttribute("aria-expanded","false");
                document.body.style.overflow = "";
                // collapse all submenus
                menu.querySelectorAll(".dropdown").forEach(li => li.classList.remove("open"));
                menu.querySelectorAll(".submenu-toggle[aria-expanded='true']").forEach(btn => btn.setAttribute("aria-expanded","false"));
                menu.querySelectorAll(".dropdown-menu").forEach(ul => ul.style.display = "");
              }

              toggle.addEventListener("click", function(e){
                e.preventDefault();
                menu.classList.contains("open") ? closeDrawer() : openDrawer();
              });
              backdrop.addEventListener("click", closeDrawer);
              if (closeBtn) closeBtn.addEventListener("click", function(e){ e.preventDefault(); closeDrawer(); });

              function isMobile(){ return window.matchMedia("(max-width: 768px)").matches; }

              // Bind ALL dropdowns (Explore, News, Products, etc.)
              const dropdowns = menu.querySelectorAll(".dropdown");
              dropdowns.forEach((li) => {
                const label = li.querySelector(".has-submenu");
                const chev  = li.querySelector(".submenu-toggle");

                function toggleSubmenu(e){
                  if (!isMobile()) return;
                  e.preventDefault();
                  const menuEl = li.querySelector(".dropdown-menu");
                  const chevEl = li.querySelector(".submenu-toggle");
                  const isOpen = li.classList.contains("open");
                  li.classList.toggle("open", !isOpen);
                  if (chevEl) chevEl.setAttribute("aria-expanded", (!isOpen).toString());
                  if (menuEl) menuEl.style.display = !isOpen ? "block" : "none";
                }

                if (label) label.addEventListener("click", toggleSubmenu);
                if (chev)  chev.addEventListener("click", toggleSubmenu);
              });

              window.addEventListener("keydown", (e) => { if (e.key === "Escape" && menu.classList.contains("open")) closeDrawer(); });
              window.addEventListener("resize", () => { if (!isMobile()) closeDrawer(); });
            })();

            window.dispatchEvent(new Event("header:ready"));
          })
          .catch(err => console.error("Failed to load header.html:", err));
      });
    </script>

    <!-- News carousel behavior (unchanged) -->
    <script>
      (function () {
        const rail = document.querySelector('.rail');
        const prev = document.querySelector('.arrow.left');
        const next = document.querySelector('.arrow.right');
        const dotsWrap = document.querySelector('.dots');
        const cards = Array.from(document.querySelectorAll('.story'));
        if (!rail || cards.length === 0) return;

        cards.forEach((_, i) => {
          const b = document.createElement('button');
          b.type = 'button';
          b.setAttribute('aria-label', 'Go to story ' + (i + 1));
          b.addEventListener('click', () => goTo(i));
          dotsWrap.appendChild(b);
        });

        function cardWidth() {
          const w = cards[0]?.getBoundingClientRect().width || rail.clientWidth;
          const gap = parseFloat(getComputedStyle(rail).columnGap || getComputedStyle(rail).gap || 20);
          return w + gap;
        }

        function goTo(index) {
          const clampIndex = Math.max(0, Math.min(index, cards.length - 1));
          cards[clampIndex].scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'center' });
        }

        function atStart() { return rail.scrollLeft <= 2; }
        function atEnd() {
          const max = rail.scrollWidth - rail.clientWidth - 2;
          return rail.scrollLeft >= max;
        }

        function updateUI() {
          prev.disabled = atStart();
          next.disabled = atEnd();

          const railRect = rail.getBoundingClientRect();
          const railCenter = railRect.left + railRect.width / 2;

          let active = 0, min = Infinity;
          cards.forEach((c, i) => {
            const rect = c.getBoundingClientRect();
            const center = rect.left + rect.width / 2;
            const dist = Math.abs(center - railCenter);
            if (dist < min) { min = dist; active = i; }
          });

          dotsWrap.querySelectorAll('button').forEach((b, i) => {
            b.setAttribute('aria-current', i === active ? 'true' : 'false');
          });
        }

        function scrollByStep(dir) {
          rail.scrollBy({ left: dir * cardWidth(), behavior: 'smooth' });
        }

        prev.addEventListener('click', () => scrollByStep(-1));
        next.addEventListener('click', () => scrollByStep(1));

        rail.addEventListener('keydown', (e) => {
          if (e.key === 'ArrowRight') { e.preventDefault(); scrollByStep(1); }
          if (e.key === 'ArrowLeft')  { e.preventDefault(); scrollByStep(-1); }
        });

        rail.addEventListener('scroll', updateUI, { passive: true });
        window.addEventListener('resize', updateUI);
        updateUI();
      })();
    </script>
  </body>
</html>
